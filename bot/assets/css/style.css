/* 
 * ========================================
 * UNIVERSAL CHAT INTERFACE
 * ========================================
 * 
 * Neutral color scheme designed to work with ANY application theme.
 * Uses subtle blues and grays that blend seamlessly everywhere.
 * 
 * Quick Customization:
 * -------------------
 * Override CSS variables in your stylesheet:
 * 
 * :root {
 *   --primary: #your-brand-color;
 *   --primary-dark: #darker-shade;
 *   --primary-light: #lighter-shade;
 * }
 * 
 * Or use completely neutral grayscale:
 * 
 * :root {
 *   --primary: #2D2D2D;
 *   --primary-dark: #1A1A1A;
 *   --primary-light: #404040;
 * }
 * 
 * See THEME_CUSTOMIZATION.md for more examples.
 * ========================================
 */

:root {
      /* Universal Neutral Dark Theme - Primary Colors */
      --primary: #3B82F6;          /* Subtle blue - universally appealing */
      --primary-dark: #2563EB;     /* Darker variant for depth */
      --primary-light: #60A5FA;    /* Lighter variant for highlights */
      --secondary: #8B92A5;        /* Neutral gray-blue accent */
      
      /* Background Colors - Neutral Grays */
      --dark: #1E1E1E;             /* Soft dark background */
      --darker: #141414;           /* Deeper background */
      --light: #F5F5F5;            /* Off-white text color */
      
      /* Utility Colors - Subtle & Universal */
      --accent: #6B7280;           /* Muted gray accent */
      --success: #22C55E;          /* Standard green */
      --warning: #F59E0B;          /* Standard amber */
      --info: #3B82F6;             /* Info blue */
      
      /* Gray Scale - Neutral Palette */
      --gray: #9CA3AF;
      --gray-light: #D1D5DB;
      --gray-dark: #4B5563;
      --gray-darker: #374151;
      
      /* Gradients - Minimal & Subtle */
      --bg-gradient: linear-gradient(135deg, #1E1E1E 0%, #141414 100%);
      --header-gradient: linear-gradient(135deg, #2563EB 0%, #3B82F6 100%);
      --message-user-bg: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      
      /* Component Specific */
      --message-bot-bg: #2A2A2A;
      --message-bot-border: 1px solid #3A3A3A;
      --input-bg: #2A2A2A;
      --input-border: 1px solid #3A3A3A;
      --input-focus-border: var(--primary);
      --suggestions-bg: #1E1E1E;
      --scrollbar-thumb: var(--gray-dark);
      
      /* Shadows - Subtle Depth */
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.15);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
}

[data-theme="light"] {
      /* Universal Neutral Light Theme - Primary Colors */
      --primary: #3B82F6;          /* Subtle blue - universally appealing */
      --primary-dark: #2563EB;     /* Darker variant */
      --primary-light: #60A5FA;    /* Lighter variant */
      --secondary: #6B7280;        /* Neutral gray accent */
      
      /* Background Colors - Clean Whites & Light Grays */
      --dark: #FFFFFF;             /* Pure white background */
      --darker: #F8F9FA;           /* Subtle off-white */
      --light: #1A1A1A;            /* Dark text color */
      
      /* Utility Colors - Subtle & Universal */
      --accent: #6B7280;           /* Muted gray accent */
      --success: #22C55E;          /* Standard green */
      --warning: #F59E0B;          /* Standard amber */
      --info: #3B82F6;             /* Info blue */
      
      /* Gray Scale */
      --gray: #6B7280;
      --gray-light: #9CA3AF;
      --gray-dark: #374151;
      --gray-darker: #1F2937;
      
      /* Gradients - Minimal & Clean */
      --bg-gradient: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);
      --header-gradient: linear-gradient(135deg, #2563EB 0%, #3B82F6 100%);
      --message-user-bg: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      
      /* Component Specific */
      --message-bot-bg: #F8F9FA;
      --message-bot-border: 1px solid #E5E7EB;
      --input-bg: #F8F9FA;
      --input-border: 1px solid #E5E7EB;
      --input-focus-border: var(--primary);
      --suggestions-bg: #FFFFFF;
      --scrollbar-thumb: #D1D5DB;
      
      /* Shadows - Soft & Professional */
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.06);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

body {
      background: var(--bg-gradient);
      height: 100vh;
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: var(--light);
      transition: all 0.3s ease;
}

.chat-container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      width: 100%;
      background: var(--dark);
      transition: all 0.3s ease;
}

.chat-header {
      background: var(--header-gradient);
      color: white;
      padding: 20px 20px;
      text-align: center;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
      box-shadow: var(--shadow-sm);
}

.header-controls {
      display: flex;
      gap: 10px;
}

#logger {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 20px;
      font-family: monospace;
      background-color: #f9f9f9;
      max-height: 200px;
      overflow-y: auto;
}

.theme-toggle, .voice-record {
      background: rgba(255, 255, 255, 0.15);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      color: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
}

.theme-toggle:hover, .voice-record:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: scale(1.05);
}

.voice-recording {
      animation: pulse 1.5s infinite;
      background: var(--secondary) !important;
      box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.3);
}

@keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
}

.chat-header h2 {
      margin: 0;
      font-weight: 700;
      letter-spacing: 0.5px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.chat-header p {
      margin: 8px 0 0;
      opacity: 0.85;
      font-weight: 300;
}

.chat-messages {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      padding: 20px;
      padding-bottom: 10px;
      background: url(../doc/dark2.png);
      scrollbar-width: thin;
      scrollbar-color: var(--scrollbar-thumb) var(--dark);
      transition: all 0.3s ease;
}

.chat-messages::-webkit-scrollbar { width: 8px; }
.chat-messages::-webkit-scrollbar-track { background: var(--dark); }
.chat-messages::-webkit-scrollbar-thumb {
      background: var(--scrollbar-thumb);
      border-radius: 4px;
}
.chat-messages::-webkit-scrollbar-thumb:hover { background: var(--accent); }

.message { margin-bottom: 20px; display: flex; }
.user-message { justify-content: flex-end; }
.bot-message { justify-content: flex-start; }

.message-content {
      max-width: 80%;
      padding: 14px 18px;
      border-radius: 18px;
      position: relative;
      overflow-x: auto;   /* ✅ scroll if content wider */
}

/* Markdown content styling */
.markdown-content h1,
.markdown-content h2,
.markdown-content h3 {
      color: var(--light);
      margin-top: 16px;
      margin-bottom: 12px;
      line-height: 1.3;
}

.markdown-content h1 {
      font-size: 1.5em;
      border-bottom: 2px solid var(--primary);
      padding-bottom: 6px;
}

.markdown-content h2 {
      font-size: 1.3em;
      border-bottom: 1px solid rgba(107, 114, 128, 0.3);
      padding-bottom: 4px;
}

.markdown-content h3 {
      font-size: 1.1em;
      font-weight: 600;
}

.markdown-content p {
      margin: 8px 0;
      line-height: 1.6;
}

.markdown-content ul,
.markdown-content ol {
      margin: 10px 0;
      padding-left: 25px;
}

.markdown-content li {
      margin: 4px 0;
      line-height: 1.5;
}

.markdown-content strong {
      font-weight: 600;
      color: var(--light);
}

.markdown-content em {
      font-style: italic;
}

.markdown-content code {
      background: rgba(0, 0, 0, 0.2);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
}

.markdown-content pre {
      background: rgba(0, 0, 0, 0.3);
      padding: 12px;
      border-radius: 6px;
      overflow-x: auto;
      margin: 10px 0;
}

.markdown-content pre code {
      background: none;
      padding: 0;
}

.markdown-content blockquote {
      border-left: 3px solid var(--primary);
      padding-left: 12px;
      margin: 10px 0;
      color: var(--gray-light);
      font-style: italic;
}

/* Markdown tables - Wrapper for horizontal scroll */
.markdown-content table {
      width: 100%;
      max-width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      font-size: 0.9em;
      border: 1px solid rgba(107, 114, 128, 0.3);
      border-radius: 8px;
      overflow-x: auto;
      display: table;
      box-shadow: var(--shadow-sm);
      table-layout: fixed;
}

/* Equal width columns for consistent layout */
.markdown-content table th,
.markdown-content table td {
      width: 1%;  /* Equal width distribution */
      min-width: 100px;  /* Minimum readable width */
      max-width: 200px;  /* Maximum width before text overflow */
}

.markdown-content table thead,
.markdown-content table tbody {
      display: table-header-group;
      width: 100%;
}

.markdown-content table tbody {
      display: table-row-group;
}

.markdown-content table tr {
      display: table-row;
      width: 100%;
}

.markdown-content table th {
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
      color: white;
      text-align: left;
      padding: 10px 12px;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.75em;
      letter-spacing: 0.5px;
      white-space: nowrap;
}

.markdown-content table td {
      padding: 10px 12px;
      border-bottom: 1px solid rgba(107, 114, 128, 0.2);
      color: var(--light);
      text-align: left;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
}

.markdown-content table tr:last-child td {
      border-bottom: none;
}

.markdown-content table tr:nth-child(even) {
      background-color: rgba(0, 0, 0, 0.2);
}

[data-theme="light"] .markdown-content table tr:nth-child(even) {
      background-color: rgba(243, 244, 246, 0.5);
}

[data-theme="light"] .markdown-content table tr:nth-child(odd) {
      background-color: rgba(255, 255, 255, 0.5);
}

/* Mobile table optimization */
@media (max-width: 768px) {
      .markdown-content table {
            font-size: 0.8em;
            display: block;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
      }
      
      .markdown-content table th,
      .markdown-content table td {
            padding: 8px 10px;
            font-size: 0.85em;
      }
}

@media (max-width: 480px) {
      .markdown-content table {
            font-size: 0.75em;
      }
      
      .markdown-content table th,
      .markdown-content table td {
            padding: 6px 8px;
            font-size: 0.8em;
      }
      
      .markdown-content table th {
            font-size: 0.7em;
      }
}

[data-theme="light"] .markdown-content code {
      background: rgba(0, 0, 0, 0.05);
}

[data-theme="light"] .markdown-content pre {
      background: rgba(0, 0, 0, 0.05);
}

/* Chart images in Markdown */
.markdown-content img {
      max-width: 100%;
      width: auto;
      height: auto;
      border-radius: 8px;
      margin: 15px auto;
      display: block;
      box-shadow: var(--shadow-md);
      background: white;
      padding: 10px;
}

[data-theme="light"] .markdown-content img {
      background: #F9FAFB;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Pagination styling in Markdown */
.markdown-content hr {
      border: none;
      border-top: 2px solid rgba(107, 114, 128, 0.2);
      margin: 20px 0;
}

[data-theme="light"] .markdown-content hr {
      border-top-color: rgba(107, 114, 128, 0.3);
}

/* Responsive chart sizing */
@media (max-width: 768px) {
      .markdown-content img {
            max-width: 100%;
            width: 100%;
      }
}

@media (max-width: 480px) {
      .markdown-content img {
            padding: 8px;
      }
}

.user-message .message-content {
      background: var(--message-user-bg);
      color: white;
      border-bottom-right-radius: 5px;
      box-shadow: var(--shadow-md);
}

.bot-message .message-content {
      background: var(--message-bot-bg);
      color: var(--light);
      border: var(--message-bot-border);
      border-bottom-left-radius: 5px;
      box-shadow: var(--shadow-sm);
}

/* ✅ Table fix - Horizontal scroll + proper column alignment */
.message-table {
      width: 100%;
      max-width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      font-size: 0.9em;
      border: 1px solid rgba(107, 114, 128, 0.3);
      border-radius: 8px;
      overflow-x: auto;
      display: table;
      box-shadow: var(--shadow-sm);
      -webkit-overflow-scrolling: touch;
      table-layout: fixed;
}

/* Equal width columns for consistent layout */
.message-table th,
.message-table td {
      width: 1%;  /* Equal width distribution */
      min-width: 100px;  /* Minimum readable width */
      max-width: 200px;  /* Maximum width before text overflow */
}

.message-table thead,
.message-table tbody {
      display: table-header-group;
      width: 100%;
}

.message-table tbody {
      display: table-row-group;
}

.message-table tr {
      display: table-row;
      width: 100%;
}

.message-table th {
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
      color: white;
      text-align: left;
      padding: 10px 12px;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.75em;
      letter-spacing: 0.5px;
      white-space: nowrap;
}

/* Right-align headers for numeric columns */
.message-table th.numeric,
.message-table th[data-type="numeric"] {
      text-align: right;
}

.message-table td {
      padding: 10px 12px;
      border-bottom: 1px solid rgba(107, 114, 128, 0.2);
      color: var(--light);
      text-align: left;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
}

/* Right-align numeric data cells */
.message-table td.numeric,
.message-table td[data-type="numeric"] {
      text-align: right;
      font-family: 'Courier New', monospace;
      font-weight: 500;
}

.message-table tr:last-child td { border-bottom: none; }

.message-table tr:nth-child(even) {
      background-color: rgba(0, 0, 0, 0.2);
}

[data-theme="light"] .chat-messages {
      background:url(../doc/light.png);
}

[data-theme="light"] .message-table tr:nth-child(even) {
      background-color: rgba(243, 244, 246, 0.5);
}

[data-theme="light"] .message-table tr:nth-child(odd) {
      background-color: rgba(255, 255, 255, 0.5);
}

/* Mobile table optimization - compact for more data */
@media (max-width: 768px) {
      .message-table {
            font-size: 0.8em;
      }
      
      .message-table th,
      .message-table td {
            padding: 8px 10px;
            font-size: 0.85em;
            min-width: 80px;  /* Smaller minimum width on mobile */
            max-width: 150px; /* Smaller maximum width on mobile */
      }
}

@media (max-width: 480px) {
      .message-table {
            font-size: 0.75em;
      }
      
      .message-table th,
      .message-table td {
            padding: 6px 8px;
            font-size: 0.8em;
            min-width: 60px;  /* Even smaller minimum width on small mobile */
            max-width: 120px; /* Even smaller maximum width on small mobile */
      }
      
      .message-table th {
            font-size: 0.7em;
            padding: 6px 8px;
      }
}

.chat-input {
      display: flex;
      padding: 15px 20px;
      background: var(--dark);
      border-top: 1px solid rgba(107, 114, 128, 0.2);
      transition: all 0.3s ease;
      flex-shrink: 0;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
}

.chat-input input {
      flex: 1;
      padding: 14px 20px;
      background: var(--input-bg);
      border: var(--input-border);
      border-radius: 24px;
      outline: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      color: var(--light);
      font-size: 1em;
}

.chat-input input:focus {
      border-color: var(--input-focus-border);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
      background: var(--input-bg);
}

.chat-input input::placeholder { color: var(--gray); }

.chat-input button {
      margin-left: 12px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
      color: white;
      border: none;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-md);
}

.chat-input button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
}

.chat-input button:active { 
      transform: translateY(0);
      box-shadow: var(--shadow-sm);
}

.suggestions-wrapper {
      flex-shrink: 0;
      background: var(--suggestions-bg);
      border-top: 1px solid rgba(107, 114, 128, 0.2);
}

.suggestions-toggle {
      display: none;
      width: 100%;
      padding: 12px 20px;
      background: var(--dark);
      border: none;
      border-bottom: 1px solid rgba(107, 114, 128, 0.2);
      color: var(--light);
      font-size: 0.9em;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      align-items: center;
      justify-content: space-between;
      gap: 10px;
}

.suggestions-toggle:hover {
      background: rgba(99, 102, 241, 0.1);
}

.suggestions-toggle:active {
      background: rgba(99, 102, 241, 0.15);
}

.suggestions-toggle .fas.fa-lightbulb {
      color: var(--warning);
      margin-right: 8px;
}

.suggestions-toggle .toggle-icon {
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 0.8em;
      color: var(--gray);
}

.suggestions-toggle.collapsed .toggle-icon {
      transform: rotate(180deg);
}

.suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      padding: 12px 15px;
      background: var(--suggestions-bg);
      transition: all 0.3s ease;
      overflow: hidden;
}

.suggestion {
      padding: 10px 18px;
      background: var(--dark);
      border: 1px solid rgba(107, 114, 128, 0.3);
      border-radius: 20px;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      color: var(--gray-light);
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
}

.suggestion i {
      font-size: 0.95em;
      opacity: 0.8;
}

.suggestion:hover {
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
      color: white;
      border-color: transparent;
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
}

.suggestion:hover i {
      opacity: 1;
}

.suggestion:active {
      transform: translateY(0);
}

.typing-indicator {
      display: inline-flex;
      padding: 14px 18px;
      background: var(--message-bot-bg);
      border-radius: 18px;
      border-bottom-left-radius: 5px;
      border: var(--message-bot-border);
}

.typing-dot {
      width: 8px;
      height: 8px;
      background: var(--primary);
      border-radius: 50%;
      margin: 0 4px;
      animation: typingAnimation 1.4s infinite;
}
.typing-dot:nth-child(1) { animation-delay: 0s; }
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes typingAnimation {
      0%, 60%, 100% { transform: translateY(0); opacity: 0.6; }
      30% { transform: translateY(-5px); opacity: 1; }
}

.timestamp {
      font-size: 0.7em;
      opacity: 0.6;
      margin-top: 6px;
      text-align: right;
}

.voice-status {
      text-align: center;
      padding: 5px;
      font-size: 0.8em;
      color: var(--gray);
      flex-shrink: 0;
      min-height: 20px;
}

@media (max-width: 768px) {
      .message-content { max-width: 90%; }
      .chat-header { 
            padding: 15px 15px; 
            flex-wrap: wrap;
      }
      .chat-header h2 { 
            font-size: 1.3em; 
      }
      .chat-header p { 
            font-size: 0.85em; 
      }
      
      /* Show toggle button on mobile */
      .suggestions-toggle {
            display: flex;
      }
      
      /* Hide suggestions by default on mobile */
      .suggestions {
            max-height: 0;
            padding: 0 15px;
            opacity: 0;
            visibility: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 0.3s ease, 
                        padding 0.3s ease;
      }
      
      /* Show suggestions when expanded */
      .suggestions.expanded {
            max-height: 500px;
            padding: 12px 15px;
            opacity: 1;
            visibility: visible;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 0.3s ease 0.1s, 
                        padding 0.3s ease;
      }
      
      .suggestion {
            flex: 1 1 auto;
            min-width: calc(50% - 5px);
            text-align: center;
      }
      .chat-input {
            padding: 12px 15px;
      }
}

@media (max-width: 480px) {
      .chat-header { 
            padding: 12px 10px; 
      }
      .chat-header h2 { 
            font-size: 1.1em; 
      }
      .chat-header p { 
            font-size: 0.75em; 
            margin: 5px 0 0;
      }
      .theme-toggle, .voice-record {
            width: 35px;
            height: 35px;
      }
      .chat-messages {
            padding: 15px 10px;
      }
      .chat-input {
            padding: 10px;
      }
      .chat-input input {
            padding: 12px 16px;
            font-size: 0.95em;
      }
      .chat-input button {
            width: 45px;
            height: 45px;
      }
      .suggestions-toggle {
            padding: 10px 15px;
            font-size: 0.85em;
      }
      .suggestions-toggle span {
            font-size: 0.95em;
      }
      .suggestion {
            padding: 8px 14px;
            font-size: 0.85em;
            min-width: 100%;
      }
}
